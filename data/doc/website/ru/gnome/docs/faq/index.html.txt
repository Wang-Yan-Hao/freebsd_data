[FreeBSD The Power to Serve]

Пожертвование в пользу FreeBSD

 

-   На главную

-   О FreeBSD
    -   Введение
    -   Возможности
    -   Продвижение
    -   Маркетинг
    -   Политика конфиденциальности
    -   Проекты
    -   Порты

-   Получение FreeBSD
    -   Информация о релизах
    -   Подготовка релизов

-   Документация
    -   Часто задаваемые вопросы
    -   Руководство
    -   Руководство портера
    -   Руководство разработчика
    -   Руководство коммиттера
    -   Страницы справочника
    -   Презентации и исследования
    -   Учебник Проекта документирования
    -   Все книги и статьи

-   Сообщество
    -   Списки рассылки
    -   Форумы
    -   Группы пользователей
    -   Мероприятия
    -   Журнал FreeBSD
    -   Вопросы и ответы (внешнее)

-   Разработчики
    -   Идеи для Проекта
    -   Репозиторий Git
    -   Репозиторий SVN
    -   Зеркало GitHub
    -   Ревью кода (Phabricator)
    -   Wiki
    -   Сервис непрерывной интеграции

-   Поддержка
    -   Поставщики решений
    -   Информация о безопасности
    -   Сообщения об ошибках
    -   Отправить сообщение об ошибке
    -   Веб-ресурсы

-   Фонд
    -   Помощь деньгами
    -   Помощь оборудованием

-   GNOME
    -   Инструкции по установке
    -   Скриншоты
    -   Связаться с нами

Проект FreeBSD GNOME: FAQ по GNOME

Краткое содержание

1.  Как получить GNOME 2.32 для FreeBSD?

2.  Построить GNOME 2.32 из портов не удаётся. Что делать?

3.  Я установил GNOME 2.32, но там нет приложения foo. Где взять?

4.  Как лучше всего выполнить обновление с GNOME 1.4 на GNOME 2?

5.  Как лучше всего выполнить обновление с GNOME 2.30 на GNOME 2.32?

6.  Как обеспечить постоянное наличие современных версий компонентов и
    приложений GNOME 2.32?

7.  Могу ли я устанавливать приложения для GNOME 1.4 в GNOME 2.32?

8.  Где можно найти дополнительные темы для GNOME 2.32?

9.  Какие оконные менеджеры нормально работают с GNOME 2.32?

10. Поддерживает ли GNOME 2.32 шрифты с антиалиасингом?

11. Как можно контролировать, с какими шрифтами используется
    антиалиасинг?

12. Как можно отредактировать меню GNOME 2?

13. Как использовать настройки ресурсов GTK+ 2 с приложениями GTK+ 2 при
    работе вне оболочки GNOME?

14. Как выполнить настройки для приложений GNOME 1.4 при работе в GNOME
    2.32?

15. либо Totem/Goobox/Sound-juicer не могут найти привод CD/DVD. Как это
    исправить?

16. [Как добавить новые сеансы GDM?

17. Как отключить многооконный режим Nautilus?

18. Как отключить иконки "Computer", "Home" и "Trash" на рабочем столе?

19. [Как в Nautilus смонтировать сменные носители?

20. Почему GNOME так медленно запускается?

21. Как установить пакеты GNOME из GNOME Tinderbox?

22. Как в GNOME добавить новые MIME-типы?

23. Как настроить GDM для автоматического входа в систему?

24. Как выполнить обновление версии графической среды с gnome2-lite до
    полной версии GNOME 2.32?

Полный текст

1.  Как получить GNOME 2.32 для FreeBSD? Имеются два способа установки
    GNOME 2.32 во FreeBSD. Первым способом является использование
    пакаджей, а вторым использование портов. Перед тем, как выполнять
    какие-либо установки, сначала вы должны ознакомиться с замечания о
    релизе GNOME 2.32.

    Установка GNOME 2.32 из пакаджей.

    Для установки GNOME 2.32 из пакаджей воспользуйтесь следующей
    командой:

    # pkg_add -r gnome2

    Она сгрузит последние пакаджи GNOME 2.32 с FTP-сервера FreeBSD и
    выполнит их установку в вашу систему.

    Обновляющиеся пакеты GNOME для i386 для всех поддерживаемых версий
    FreeBSD также доступны с GNOME Tinderbox.

    Для построения и установки GNOME 2.32 из портов, вы должны сначала
    сгрузить при помощи cvsup последнее состояние дерева портов. Затем:

        # cd /usr/ports/x11/gnome2
        # make clean
        # make install clean

    Включение поддержки File Alteration Monitor (FAM) в вашей
    графической среде 2.32.

    В GNOME по умолчанию включена поддержка File Alteration Monitor
    (devel/fam), для улучшения возможностей среды GNOME по работе с
    файлами, добавляемыми, удаляемыми или модифицируемыми другими
    программами. Для того, чтобы воспользоваться преимуществами этой
    функциональности, поддержка FAM должна быть добавлена в
    inetd.conf(5). Дополнительную информацию можно найти в файле
    ports/devel/fam/pkg-message.

    Запуск GNOME 2.32 одновременно с X.

    После того, как вы установили оболочку GNOME 2.32, запустить GNOME
    2.32 можно, добавив следующую строку в один из файлов ~/.xsession
    или ~/.xinitrc, туда, где это удобнее:

        exec gnome-session

2.  Построить GNOME 2.32 из портов не удаётся. Что делать?

    Основная масса проблем с компиляцией GNOME 2.32 может быть решена
    путём обновления всех необходимых компонентов GNOME 2.32 до
    последних версий.

    Большинство проблем устраняются при обновлении

    Если вы ещё не выполнили рекомендации, описанные в FAQ #6, сделайте
    это, потому что, скорее всего, это решит те проблемы, ради решения
    которых вы читаете этот документ.

    Пожалуйста, следуйте указаниям, описанным в FAQ #6. Если вы этого не
    сделаете и обратитесь за помощью, то вам посоветуют выполнить
    рекомендации из FAQ #6.

    В общем случае, если компонент GNOME 2.32 устарел, то вы увидите
    сообщение об ошибке, подобное следующему:

        checking for libgnomeui-2.0 libbonoboui-2.0 libbonobo-2.0 >= 2.2.1
        gnome-vfs-2.0 libgnomeprint-2.2 >= 2.3.0 libgnomeprintui-2.2 libglade-2.0...
        configure: error: Library requirements (libgnomeui-2.0 libbonoboui-2.0
        libbonobo-2.0 >= 2.2.1 gnome-vfs-2.0 libgnomeprint-2.2 >= 2.3.0 libgnomeprintui-2.2
        libglade-2.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable
        if your libraries are in a nonstandard prefix so pkg-config can find them.

    Просто держите ваше дерево портов в актуальном состоянии, и такие
    ошибки проявляться не будут.

    Если устарела программа pkg-config, то вы будете наблюдать сообщения
    об ошибках конфигурации, подобные следующим:

        configure: error: *** pkg-config too old; version 0.14 or better required.

    Хотя это может быть указано в другом месте, но сообщение вполне
    понятно: вам нужно обновить pkg-config. Приложение pkg-config
    находится в порту devel/pkgconfig. После обновления этого порта до
    последней версии эта ошибка исчезнет.

    Вы можете наблюдать ошибки компилятора, связанные с pthreads (POSIX®
    threads), типа следующих:

        undefined reference to 'strerror_r'

    Для исправления ошибок, связанных с потоками выполнения, вам
    необходимо вкомпилировать в ваше ядро следующее:

        options     _KPOSIX_PRIORITY_SCHEDULING

    Если вы отслеживаете -stable или -current, не задавайте NOLIBC_R в
    /etc/make.conf. Если вы это сделали, то удалите и перестройте
    систему. Если проблемы всё ещё остались, пожалуйста, пошлите
    сообщение на адрес freebsd-gnome@FreeBSD.org с выдачей ошибочных
    компиляций. Также не помещает включение файла config.log из рабочего
    каталога порта.

    Исключение двух версий одной и той же библиотеки.

    Обычным источником ошибок при построении является наличие нескольких
    версий одной и той же библиотеки. Это случается, если вы
    устанавливаете две различные версии одного и того же порта, или даже
    при обычном использовании portupgrade. Вы можете сохранить резервные
    копии библиотек в каталоге /usr/local/lib/compat/pkg и удалить их, а
    затем запустить portupgrade -u -rf pkgconfig. Этим вы вынудите
    выполнить перестроение всех приложений, связанных с GNOME (и
    некоторое количество других программ), в отсутствии старых версий
    библиотек в каталоге /usr/local/lib/compat/pkg.

3.   Я установил GNOME 2.32, но там нет приложения foo. Где взять?

    В пакадж gnome2 включен только базовый набор компонентов графической
    оболочки. Вот некоторые другие мета-порты GNOME, в которые удобно
    сгруппировано популярное программное обеспечения для GNOME 2. *
    GNOME 2 Fifth Toe (x11/gnome2-fifth-toe) состоит из стабильных
    приложений GNOME 2, которые многие пользователи ожидают увидеть в
    функциональном окружении рабочего стола. Сюда включены приложения
    для работы с изображениями, программы для организации чата и
    мгновенного обмена сообщениями, а также музыкальные и мультимедийные
    проигрыватели * GNOME 2 Hacker Tools (devel/gnome2-hacker-tools)
    состоит из приложений, которые нужны разработчикам для создания и
    поддержки программных GNOME-проектов. Сюда входят различные IDE,
    построители интерфейсов, "хакерские" редакторы и инструменты
    генерации кода. * GNOME 2 Office (editors/gnome2-office) состоит из
    приложений, которые часто включаются в офисные и
    делопроизводственные пакеты. Здесь имеется приложение для работы с
    электронными таблицами, текстовый процессор, приложение для
    автоматизации управления проектами, программа для работы с базой
    данных, набор программ для совместной работы, а также средство
    построения диаграмм. * Пакет GNOME 2 Power Tools
    (x11/gnome2-power-tools) состоит из утилит и апплет для
    технически-ориентированного пользователя GNOME. В нём также
    содержится множество дополнительных полезных утилит для некоторых
    приложений из пакетов Desktop и Fifth Toe.

    + Для установки любых перечисленных наборов из пакаджей:

    # pkg_add -r meta-port

+ Например, для установки GNOME 2 Fifth Toe из пакаджей:

+

    # pkg_add -r gnome2-fifth-toe

+ Для установки любых перечисленных наборов из портов:

+

    # cd /usr/ports/category/meta-port
    # make clean
    # make install clean

+ Например, для установки GNOME 2 Fifth Toe из портов:

+

    # cd /usr/ports/x11/gnome2-fifth-toe
    # make clean
    # make install clean

+

1.  Как лучше всего выполнить обновление с GNOME 1.4 на GNOME 2?

    Если вы используете GNOME 1.4 и хотите обновить её до GNOME 2.32, то
    сначала ознакомьтесь с официальными инструкциями по обновлению на
    сайте GNOME. Удостоверьтесь, что ваши порты GNOME 1.4 обновлены до
    последних версий, после чего удалите из системы следующие пакаджи
    GNOME 1.4:

        gnomecore
        sawfish
        gnomeapplets
        gnomemedia
        gtop
        libgtop
        nautilus
        gedit
        xalf
        bugbuddy
        gnomeaudio
        gnomegames
        gnomeutils
        gdm
        eog
        ggv

    После удаления этих пакаджей вы можете построить GNOME 2.32 в
    соответствии с инструкциями выше.

2.  Как лучше всего выполнить обновление с GNOME 2.30 на GNOME 2.32?

    Процесс смены версии с 2.30 на 2.32 несколько сложнее, чем переход с
    версии 2.4 на 2.30. Настоятельно рекомендуем прочесть подробные
    инструкции в FAQ по обновлению.

3.  Как обеспечить постоянное наличие современных версий компонентов и
    приложений GNOME 2.32?

    Настоятельно вам рекомендуем использовать утилиту portupgrade — и
    только portupgrade — для содержания ваших компонентов и приложений
    GNOME 2.32 в актуальном состоянии.

    Обновление ваших портов при помощи portupgrade.

    После обновления дерева портов (предположительно при помощи cvsup)
    следующие две команды обновят всё, что нужно обновить, и решат
    проблемы со всеми несоответствиями:

        # pkgdb -F
        # portupgrade -a

    Запуск с нуля.

    Несмотря на постоянное использование portupgrade, если всё перестаёт
    строиться со всеми другими компонентами, вы можете избавить себя от
    головной боли или сэкономить часа три, просто удалив все свои
    приложения GNOME и переустановив их (файлы с вашими данными
    останутся нетронутыми). Для этого выполните следующие команды:

        # pkgdb -F
        # pkg_delete -rf pkgconfig\*
        # cd /usr/ports/x11/gnome2
        # make clean
        # make install clean

    После отработки вышеуказанных команд вы должны переустановить все
    нужные вам приложения GNOME. Это выглядит как болезненный процесс,
    однако на самом деле является прекрасным способом почистить вашу
    систему. Просто устанавливайте приложения по мере появления
    необходимости в них, и вы удивитесь, сколько дискового пространства
    вам удалось сэкономить. Полное перестроение занимает значительное
    время; к счастью, это требуется достаточно редко.

4.  Могу ли я устанавливать приложения для GNOME 1.4 в GNOME 2.32?

    Порты для GNOME 1.4 будут нормально работать с оболочкой GNOME 2.
    Старые приложения, которые были несовместимы с оболочкой GNOME 2,
    были удалены из дерева портов, так что в оболочке GNOME 2 можно без
    опаски запускать любые приложения GNOME из дерева портов.

5.  Где можно найти дополнительные темы для GNOME 2.32?

    На следующих Web-сайтах вы можете найти темы для GTK+-1/2, metacity,
    sawfish, nautilus, GDM и иконок, фоновые изображения и другие
    материалы: * art.gnome.org * GNOME-look.org * The Theme Depot *
    themes.freshmeat.net * Сайт Jimmac’s Icons Для некоторых из этих тем
    уже были созданы порты для FreeBSD. Хорошие примеры можно найти в
    мета-портах x11-themes/gnome-icons и x11-themes/metacity-themes.

6.  Какие оконные менеджеры нормально работают с GNOME 2.32?

    По умолчанию мета-порт gnome2 устанавливает оконный менеджер
    metacity. Другим популярным менеджером окон, который хорошо работает
    с GNOME 2.32, является sawfish. Sawfish может быть найден в порте
    x11-wm/sawfish2.

    Для того, чтобы перейти с metacity на sawfish в GNOME 2, вам нужно
    сделать следующее:

        # killall metacity; sawfish &
        # gnome-session-save --gui

    Команда gnome-session-save важна. Без неё при следующей регистрации
    в системе будет возвращён оконный менеджер, настроенный ранее. Чтобы
    возвратить настройки обратно, просто замените в команде sawfish на
    metacity.

    Если вам удалось заставить работать оболочку GNOME 2.32 под
    управлением другого оконного менеджера, пожалуйста, сделайте снимок
    экрана и пришлите его нам!

7.  Поддерживает ли GNOME 2.32 шрифты с антиалиасингом?

    Да! Использование антиалиасинга требует XFree86 4.x или X.Org с
    поддержкой freetype2. Для того, чтобы добавить в X поддержку
    freetype2, обеспечьте загрузку следующих модулей в разделе Modules
    файлов XF86Config или xorg.conf:

        Load    "freetype"
        Load    "type1"

    После этого просто проверьте капплету Fonts в Applications→Desktop
    Preferences. Если вы хотите для начала иметь хороший набор шрифтов
    TrueType, установите порт x11-fonts/webfonts.

    Иногда, после установки новых шрифтов в систему, необходимо указать
    на них утилите fontconfig. Если вы обнаружите, что недавно
    добавленные шрифты недоступны даже после перезапуска GNOME 2,
    запустите следующую команду, работая как пользователь root:

        # fc-cache -f -v

    Если у вас есть какие-либо вопросы, пожалуйста, присылайте их на
    адрес freebsd-gnome@FreeBSD.org.

8.  Как можно контролировать, с какими шрифтами используется
    антиалиасинг?

    GNOME 2.32 для работы с антиалиасингом использует libXft и
    fontconfig. Fontconfig является очень мощным пакетом для настройки
    шрифтов на основе XML. Вы можете создать файл ~/.fonts.conf, который
    будет управлять практически всеми аспектами утилиты fontconfig. К
    примеру, если вы не хотите применять антиалиасинг к шрифтам, меньшим
    чем 16 пунктов, создайте ~/.fonts.conf со следующим содержимым:

        <?xml version="1.0"?>
        <!DOCTYPE fontconfig SYSTEM "fonts.dtd">
        <fontconfig>

        <match target="font">
                <test name="size" compare="less_eq">
                        <double>16</double>
                </test>
                <edit name="antialias" mode="assign">
                        <bool>false</bool>
                </edit>
        </match>
        <match target="font">
                <test name="pixelsize" compare="less_eq">
                        <double>16</double>
                </test>
                <edit name="antialias" mode="assign">
                        <bool>false</bool>
                </edit>
        </match>
        </fontconfig>

    Обратитесь к fonts-conf(5) для получения дополнительной информации.

9.  Как можно отредактировать меню GNOME 2?

    В GNOME 2.32 отсутствует возможность добавлять, редактировать и
    переименовывать пункты меню GNOME иначе, чем через самостоятельное
    ручное редактирование файлов .desktop. Однако для деактивации
    пунктов, уже присутствующих в меню Applications, можно использовать
    deskutils/gnome-menu-editor.

    Появление улучшенных возможностей по редактированию меню пока
    запланировано для GNOME 2.12.

10. Как использовать настройки ресурсов GTK+ 2 с приложениями GTK+ 2 при
    работе вне оболочки GNOME?

    Приложения GNOME 2 получают свои ресурсы GTK+ 2 из тем и
    соответствующих механизмов тем. Если вы хотите запустить приложение
    GTK+ 2 вне оболочки GNOME, то вам нужно создать файл с именем
    ~/.gtkrc-2.0.

    Чтобы использовать виджеты из темы GTK+ 2 при работе вне оболочки
    GNOME, просто выполните включение (include) файла gtk-2.0/gtkrc в
    ваш ~/.gtkrc-2.0. Например:

        include "/usr/X11R6/share/themes/Crux/gtk-2.0/gtkrc"

    Если вам это нравится, то вы можете использовать одну и ту же тему
    GTK+ 1.2 как для приложений GTK+ 1.2, так и GTK+ 2, что даст вашим
    программам GTK+ единый вид. В большинстве случаев вы можете
    перенести (с некоторыми оговорками) свои настройки из вашего файла
    ~/.gtkrc (используемого в GTK+ 1.2). .. Если у вас присутствуют
    ссылки на какой либо механизм тем, вы должны обеспечить, что этот
    механизм соответствует используемому в GTK+ 2. В противном случае
    удалите запись о механизмах. .. Задание шрифтов по умолчанию не
    должно находиться в каких бы то ни было блоках style, а должно
    выполняться ключевым словом gtk-font-name. Например:

    +

        gtk-font-name = "Verdana 11"

    + Заметьте, что хотя файл gtkrc для GTK+ 1.2 будет работать с файлом
    gtkrc-2.0 для GTK+ 2, в обратную сторону это не работает: содержимое
    файла gtkrc-2.0 для GTK+ 2 не будет срабатывать, будучи перенесённое
    в файл gtkrc для GTK+ 1.2.

    + Для простой смены тем GTK+, без редактирования ваших файлов
    ~/.gtkrc, вы можете воспользоваться портами x11/gtk-theme-switch и
    x11/gtk2-theme-switch.

    +

11. Как выполнить настройки для приложений GNOME 1.4 при работе в GNOME
    2.32?

    Установите sysutils/gnomecontrolcenter, затем из командной строки
    запустите gnomecc для работы с центром управления GNOME 1.4.

12. Nautilus-cd-burner не позволяет записывать CD, либо
    Totem/Goobox/Sound-juicer не могут найти привод CD/DVD. Как это
    исправить?

    Nautilus-cd-burner, totem, goobox и sound-juicer не смогут работать
    с устройствами CD/DVD, пока в ядре не будет включена поддержка этих
    устройств и не будут назначены права на запись в файлы этих
    устройств. Nautilus-cd-burner, totem, goobox и sound-juicer работают
    с приводами CD/DVD через подсистему SCSI CAM. Поэтому вы должны
    удостовериться, что в вашем ядре настроено следующее:

        device          scbus
        device          cd
        device          pass

    При использовании приводов CD/DVD с интерфейсом ATAPI вы должны
    также проверить, что в ядре имеются следующие настройки:

        device      atapicam

    Для того, чтобы понять, какое устройство CD/DVD вы будете
    использовать, запустите следующую команду, работая как пользователь
    root:

        # camcontrol devlist

    Выдача будет выглядеть примерно следующим образом:

        <QSI CDRW/DVD SBW-242 UD22>       at scbus1 target 0 lun 0 (cd0,pass0)

    Важны устройства, перечисленные в конце в скобках. Вы должны
    удостовериться, что файлы в каталоге /dev для этих устройств
    доступны для записи пользователям, которые будут использовать
    nautilus-cd-burner, totem, goobox или sound-juicer. Кроме этих
    устройств, пользователям, которые работают с nautilus-cd-burner,
    totem, goobox и sound-juicer, должны быть доступны для записи и
    устройства /dev/xpt*. Следующие настройки в файле /etc/devfs.conf
    приведут к желаемому результату при использовании вышеперечисленных
    устройств (NB: devfs.conf поддерживается только во FreeBSD 5.X):

        perm    cd0     0666
        perm    xpt0    0666
        perm    pass0   0666

    Во FreeBSD 4.X вы можете просто задать права доступа к файлу
    устройства, и они останутся такими же после перезагрузки. Заметьте,
    что во FreeBSD 4.X вы должны использовать файлы устройств типа 'c'
    (к примеру, cd0c).

13. Как добавить новые сеансы GDM?

    Порядок добавления новых сеансов GDM существенно изменился при
    переходе от GNOME 2.2 к 2.32. Теперь для добавления новых сеансов вы
    должны создать файл .desktop, в котором содержится информация о
    параметрах сеанса. Файлы сеансов располагаются в каталоге
    /usr/X11R6/etc/dm/Sessions. Например, для добавления сеанса KDE,
    создайте файл в /usr/X11R6/etc/dm/Sessions с именем kde.desktop.
    Этот файл должен содержать следующее:

        [Desktop Entry]
        Encoding=UTF-8
        Name=KDE
        Comment=This session logs you into KDE
        Exec=/usr/local/bin/startkde
        TryExec=/usr/local/bin/startkde
        Icon=
        Type=Application

    Этот файл должен быть выполнимым. Например:

        # chmod 0555 kde.desktop

    После создания этого файла перезапустите GDM, и в меню Sessions
    появится ссылка на KDE.

14. Как отключить многооконный режим Nautilus?

    В GNOME 2.32 Nautilus работает в так называемом многооконном
    ("spatial") режиме. Это означает, что каждый объект открывается в
    новом окне. Такое поведение может подойти не всем пользователям.
    Если вы хотите вернуться к старому файловому менеджеру Nautilus,
    перейдите в Desktop→Preferences→File Management, щёлкните на
    закладке Behavior и активируйте параметр "Always open in browser
    windows".

15. Как отключить иконки "Computer", "Home" и "Trash" на рабочем столе?

    Если вы хотите, чтобы на вашем рабочем столе не было используемых по
    умолчанию иконок "Computer", "Home" и "Trash", то вы можете
    отключить все или любые из них. Для этого запустите Applications >
    System Tools > Configuration Editor, и перейдите к ключу
    /apps/nautilus/desktop. Здесь вы можете включать или выключать
    иконки, и даже переименовать "Home" и "Trash".

16. Как в Nautilus смонтировать сменные носители?

    Чтобы сменные носители (к примеру, компакт-диски, дискеты и так
    далее) были доступны в Nautilus, вы должны сначала установить
    sysctl-параметр vfs.usermount в значение 1. Для этого добавьте
    следующую строку в /etc/sysctl.conf, а затем выполните перезагрузку:

        vfs.usermount=1

    После этого каждая пользовательская точка монтирования должна быть
    описана в /etc/fstab. Например, если пользователь marcus хочет
    монтировать CD в каталог /home/marcus/cdrom, то в файле /etc/fstab
    должна присутствовать такая строка:

        /dev/acd0   /home/marcus/cdrom cd9660  ro,noauto 0 0

    Подобные строки могут понадобиться каждому новому пользователю.
    Замечание: пользователь должен быть владельцем точки монтирования и
    иметь доступ на запись для файла устройства, о котором идёт речь. В
    примере выше владельцем каталога /home/marcus/cdrom должен быть
    пользователь marcus и marcus должен иметь права на запись в файл
    устройства /dev/acd0. После настройки всех этих параметров в
    Nautilus в разделе Computer появится иконка CD-ROM. Двойной щелчок
    на этой иконке приведёт к монтированию CD и размещению иконки на
    рабочем столе.

    Другим тонким моментом при монтировании сменяемых носителей является
    необходимость помнить о том, что качестве точек монтирования в файле
    /etc/fstab должны указываться полные имена каталогов. Например, если
    каталог /home является символической ссылкой на /usr/home, то в
    примере выше вы должны указать /usr/home/marcus/cdrom. Если вы этого
    не сделаете, то при попытке размонтировать устройство или обратиться
    к нему столкнётесь со странными проблемами.

    Гэри Данн разместил очень подробные инструкции по монтированию томов
    SMB пользователями.

17. Почему GNOME так медленно запускается?

    В обычным случаях для запуска GNOME требуется всего несколько секунд
    (не более пятнадцати). Однако при определённых настройках время
    входа может затянуться на целый час.

    Первым делом проверьте, что имя хоста вашей машины определяется
    корректно. Для этого выполните следующую команду:

        ping `hostname`

    Если выполнение команды окончится неудачно, вам нужно добавить
    полное имя хоста в DNS либо в файл /etc/hosts. Если у вас нет
    статического IP-адреса, вы можете добавить имя хоста в строчку с
    localhost файла /etc/hosts. К примеру, если именем хоста для вашей
    машины является gnome-rocks.mydomain.com, отредактируйте /etc/hosts,
    изменив строчку:

        127.0.0.1               localhost localhost.my.domain

    На:

        127.0.0.1              localhost localhost.my.domain gnome-rocks gnome-rocks.mydomain.com

    После того, как разрешение имени хоста заработало, вы должны
    удостовериться в корректности настройки FAM. Начиная с GNOME 2.32,
    поддержка FAM по умолчанию в gnomevfs2 включена. Это приводит к
    тому, что такие приложения, как Nautilus, при запуске пытаются
    выполнить соединение с адресом 127.0.0.1:111. Для конфигурации FAM
    прочтите файл pkg-message в /usr/ports/devel/fam. Если вы не хотите
    использовать FAM, удалите порт devel/fam, а затем добавьте следующую
    строку в /etc/make.conf и перестройте порт devel/gnomevfs2 port:

        WITHOUT_FAM=yes

    Наконец, если у вас включен sysctl-параметр blackhole для TCP или
    UDP, это может привести к задержкам при входе в GNOME. Если после
    исправления работы функции разрешения имён хостов и настройки FAM,
    запуск GNOME всё ещё занимает продолжительное время, то проверьте,
    чтобы значение следующих sysctl-параметров было установлено в 0:

        net.inet.tcp.blackhole
        net.inet.udp.blackhole

18. Как установить пакаджи GNOME с GNOME Tinderbox?

    GNOME Tinderbox является системой, постоянно занимающейся
    построением пакаджей i386 графической среды GNOME для всех
    поддерживаемых версий FreeBSD. Вместе у улучшение технической базы в
    будущем могут появиться дополнительные мета-порты. Этот сервис может
    оказаться прекрасным способом получения самой последней версии
    GNOME, экономящим время на построение всей среды из портов.

    Для установки пакаджей с GNOME Tinderbox вы должны указать в
    качестве значения переменной окружения PACKAGESITE корректный
    каталог с пакаджами. Его можно определить, щёлкнув по ссылке Package
    Directory на главной странице Tinderbox. После определения
    правильного каталога с пакаджами вы должны добавить к нему /Latest/,
    чтобы выполнить команду pkg_add gnome2 без необходимости знать
    дополнительные номера версий. К примеру, если вы работаете с FreeBSD
    5.2.1, задайте значение PACKAGESITE следующим образом:

        http://www.marcuscom.com/tb/packages/5.2.1-FreeBSD/Latest/

    Если вы устанавливаете пакадж в системе FreeBSD -STABLE, -CURRENT
    или любом другом релизе после 4.9 или 5.2, то вы можете просто
    следовать инструкциям по установке GNOME из пакаджей. Однако если
    установка выполняется в системах FreeBSD 4.9 или 5.2.1, то вы должны
    сначала установить порт или пакадж sysutils/pkg_install, а затем
    воспользоваться следующей командой для установки GNOME из пакаджей:

        /usr/local/sbin/pkg_add -r gnome2

    Аде Лаветт (ade) поддерживает регулярное построение наборов пакаджей
    amd64 для всех мета-портов GNOME 2 на своём сервере построения
    пакаджей.

19. Как в GNOME добавить новые MIME-типы?

    Начиная с GNOME 2.32 MIME-типы хранятся в единой базе данных
    FreeDesktop. Однако gnome-control-center ещё не был соответствующим
    образом обновлён для того, чтобы можно было легко добавлять типы
    MIME в эту базу данных. Таким образом, если такие приложения, как
    Nautilus, сообщат о том, что с определённым файлом не связан никакой
    MIME-тип, то закладка Open With в разделе Properties работать не
    будет.

    Новые типы MIME можно добавить в одном или двух местах. Типы можно
    добавить на уровне всей системы для всех пользователей, либо
    локальным образом для каждого пользователя. MIME-типы для всей
    системы должны добавляться в ${LOCALBASE}/share/mime либо
    ${X11BASE}/share/mime, а локальные MIME-типы добавляются в
    ~/.local/share/mime. В обоих случаях процедура выглядит одинаково.

    Для определения нового MIME-типа вы должны создать файлы application
    и packages, его описывающие. Имя файла application должно
    соответствовать типу MIME, и содержать его название и краткое
    описание. В файле packages будут перечисляться все расширения,
    связанные с этим MIME-типом, а также любые специальные действия,
    которые можно использовать для идентификации файлов без расширений.

    К примеру, если мы хотим добавить новый локальный MIME-тип для
    файлов формата Windows HTML Help (файлы .chm) с названием
    application/x-chm, мы должны сделать следующее. Сначала мы должны
    создать каталоги ~/.local/share/mime/application и
    ~/.local/share/mime/packages, если они не существуют. Затем мы
    создаём файл приложения под названием x-chm.xml, который разместим в
    каталоге ~/.local/share/mime/application. Файл выглядит следующим
    образом:

        <xml version="1.0" encoding="utf-8"?>
        <mime-type
        xmlns="http://www.freedesktop.org/standards/shared-mime-info"
        type="application/x-chm">
          <comment>Windows HTML Help file</comment>
        </mime-type>

    После этого мы создаём packages-файл с именем chm.xml, который
    поместим в ~/.local/share/mime/packages. Файл выглядит так:

        <xml version="1.0" encoding="utf-8"?>
        <mime-info
        xmlns="http://www.freedesktop.org/standards/shared-mime-info">
          <mime-type type="application/x-chm">
            <comment>Windows HTML Help file</comment>
            <glob pattern="*.chm" />
          </mime-type>
        </mime-info>

    После создания файлов необходимо обновить базу данных MIME. Для
    этого запустите такую команду:

        % update-mime-database ~/.local/share/mime

    И, наконец, к сожалению, вы должны выйти из системы и повторно
    зарегистрироваться в GNOME, чтобы изменения вступили в силу
    полностью. Теперь для связки приложения с этим MIME-типом можно
    использовать интерфейс Properties→Open With в Nautilus. К счастью,
    все эти действия в будущем релизе GNOME будут значительно упрощены.

20. Как настроить GDM для автоматического входа в систему?

    GNOME Display Manager (GDM) может быть настроен на автоматическую
    регистрацию пользователя при запуске. Для этого сначала вы должны
    настроить поддержку подключаемых модулей авторизации (PAM) для
    gdm-autologin. В системе 5.X создайте файл /etc/pam.d/gdm-autologin
    с таким содержимым:

        auth       required     pam_nologin.so
        auth       required     pam_permit.so
        account    required     pam_unix.so
        session    required     pam_permit.so

    В системе 4.X, добавьте следующие строки в /etc/pam.conf:

        gdm-autologin    auth        required    pam_permit.so
        gdm-autologin    account     required    pam_unix.so
        gdm-autologin    session     required    pam_permit.so

    После настройки PAM, разрешающей автоматическую регистрацию GDM,
    отредактируйте /usr/X11R6/etc/gdm/gdm.conf и задайте
    AutomaticLoginEnable=true, а в качестве AutomaticLogin укажите имя
    пользователя, для которого вы хотите разрешить автоматический вход.
    К примеру:

        AutomaticLoginEnable=true
        AutomaticLogin=marcus

    Это позволит выполнить автоматическую регистрацию пользователя
    marcus сразу после запуска GDM.

21. Как выполнить обновление версии графической среды с gnome2-lite до
    полной версии GNOME 2.32?

    В версию Lite включены не все компоненты стандартной графической
    среды GNOME 2.32. Если вы хотите установить полную версию, сначала
    удалите пакадж gnome2-lite, а затем установите порт или пакадж
    gnome2. К примеру:

        # pkg_delete gnome2-lite

    Затем одно из следующего:

        # cd /usr/ports/x11/gnome2
        # make install clean

    либо:

        # pkg_add -r gnome2

    Как альтернативу, вы можете установить дополнительные компоненты
    GNOME в индивидуальном порядке при помощи соответствующих портов или
    пакаджей.

<<<<<<< HEAD
=======
------------------------------------------------------------------------
>>>>>>> b1bb5fd9 (Processing txt files in data/doc)

Дата последнего изменения: 19 июня 2021 г. выполнил Danilo G. Baio

Юридическая информация | © 1995-2023 Проект FreeBSD Все права защищены.
Название FreeBSD является зарегистрированным торговым знаком The FreeBSD
Foundation и используется Проектом FreeBSD с разрешения Фонд FreeBSD.
Контакты
